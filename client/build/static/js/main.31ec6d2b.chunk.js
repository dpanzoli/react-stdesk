(this["webpackJsonpreact-stdesk"]=this["webpackJsonpreact-stdesk"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,s){},,function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),n=s(10),i=s.n(n),o=(s(16),s(3)),r=s(4),l=s(2),d=s(6),j=s(5),h=s(11),u=s(7),b=s.n(u),m=(s(9),s(18),s(0)),O=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).state={overdue:!0},c.selectTask=c.selectTask.bind(Object(l.a)(c)),c}return Object(r.a)(s,[{key:"componentDidMount",value:function(){}},{key:"selectTask",value:function(e){e.stopPropagation(),this.props.taskHasChanged(this.props.id)}},{key:"render",value:function(){var e,t,s;return e=this.props.date?Object(m.jsxs)("div",{className:"caldate",children:[Object(m.jsx)("span",{className:"month",children:b()(this.props.date).format("MMM")}),Object(m.jsx)("span",{className:"day",children:b()(this.props.date).format("Do")})]}):Object(m.jsx)("div",{className:"nodate"}),this.props.complete&&(t=Object(m.jsxs)("div",{className:"ui green basic label",children:[Object(m.jsx)("i",{className:"check icon"}),"Compl\xe9t\xe9"]})),this.state.overdue||(s=Object(m.jsxs)("div",{className:"ui red basic label",children:[Object(m.jsx)("i",{className:"exclamation icon"}),"En retard"]})),Object(m.jsxs)("div",{className:"ui  item",onClick:this.selectTask,children:[e,Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)("div",{className:"ui segment ".concat(this.props.selected?"blue raised":""),children:[Object(m.jsx)("h3",{className:"header",children:this.props.titre}),Object(m.jsx)("div",{className:"description",children:Object(m.jsx)("p",{})}),Object(m.jsxs)("div",{className:"extra",children:[Object(m.jsx)("div",{className:"ui tag labels",children:this.props.categories.map((function(e){return Object(m.jsx)("span",{className:"ui label",children:e.lib},e.id)}))}),t,s]}),Object(m.jsx)("div",{className:"ui bottom attached progress",children:Object(m.jsx)("div",{className:"bar"})})]})})]})}}]),s}(a.a.Component),p=(s(20),function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).state={error:null,isLoaded:!1,items:[]},c}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("/allTasks").then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,items:t})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.error,c=t.isLoaded,a=t.items;return s?Object(m.jsxs)("div",{className:"ui negative message",children:[Object(m.jsx)("div",{className:"header",children:"Chargement des t\xe2ches depuis la base de donn\xe9es"}),Object(m.jsx)("p",{children:"Le serveur a renvoy\xe9 une erreur"})]}):c?Object(m.jsx)("div",{id:"tasklist",className:"ui items",children:Object.entries(a).map((function(t){var s=Object(h.a)(t,2),c=s[0],a=s[1];return Object(m.jsx)(O,{id:c,titre:a.title,date:a.date,categories:a.categories,complete:a.complete,taskHasChanged:e.props.taskHasChanged,selected:e.props.selectedTask===c},c)}))}):Object(m.jsx)("div",{id:"loading",children:"Chargement des donn\xe9es"})}}]),s}(a.a.Component)),v=(s(21),function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).state={what:"not",showControls:!1},c.controlsOn=c.controlsOn.bind(Object(l.a)(c)),c.controlsOff=c.controlsOff.bind(Object(l.a)(c)),c}return Object(r.a)(s,[{key:"controlsOn",value:function(){console.log("show controls"),this.setState({showControls:!0})}},{key:"controlsOff",value:function(){console.log("hide controls"),this.setState({showControls:!1})}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"item",children:Object(m.jsxs)("div",{className:"content",onMouseEnter:this.controlsOn,onMouseLeave:this.controlsOff,children:[Object(m.jsxs)("div",{className:"ui checkbox",children:[Object(m.jsx)("input",{type:"checkbox",name:"example"}),Object(m.jsx)("label",{children:this.props.data.is_subtask})]}),Object(m.jsx)("div",{children:this.props.data.comment}),Object(m.jsxs)("div",{className:"extra",children:["Le ",b()(this.props.data.date).format("Do MMMM YYYY"),"par ",this.props.data.user,Object(m.jsxs)("span",{className:"control ".concat(this.state.showControls?"shown":""),children:["\xa0\u2014\xa0",Object(m.jsxs)("button",{className:"ui compact basic primary mini icon button",children:[Object(m.jsx)("i",{className:"edit icon"}),"Modifier"]}),Object(m.jsxs)("button",{className:"ui compact basic primary mini icon button",children:[Object(m.jsx)("i",{className:"delete icon"}),"Supprimer"]})]})]})]})})}}]),s}(a.a.Component)),x=(s(22),function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).state={comments:[]},c.clickAnywhere=c.clickAnywhere.bind(Object(l.a)(c)),c}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("/allComments?taskid=0").then((function(e){return e.json()})).then((function(t){e.setState({comments:t})}))}},{key:"clickAnywhere",value:function(e){e.stopPropagation()}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return console.log(this.state.comments),-1===this.props.id?Object(m.jsx)("div",{}):Object(m.jsxs)("div",{id:"taskdetails",className:"ui piled segment",onClick:this.clickAnywhere,children:[Object(m.jsxs)("h4",{children:["D\xe9tails de la t\xe2che ",this.props.id," "]}),Object(m.jsxs)("div",{className:"ui progress",children:[Object(m.jsx)("div",{className:"bar",children:Object(m.jsx)("div",{className:"progress"})}),Object(m.jsx)("div",{className:"label",children:"1/10 compl\xe9t\xe9(s)"})]}),Object(m.jsx)("div",{className:"ui divided items",children:this.state.comments.map((function(e){return Object(m.jsx)(v,{data:e},e.id)}))}),Object(m.jsx)("div",{children:Object(m.jsxs)("button",{className:"ui labeled icon button",children:[Object(m.jsx)("i",{className:"add icon"}),"Commenter"]})})]})}}]),s}(a.a.Component)),f=(s(23),function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(e){var c;return Object(o.a)(this,s),(c=t.call(this,e)).state={selectedTask:-1},c.taskHasChanged=c.taskHasChanged.bind(Object(l.a)(c)),c.cancelSelection=c.cancelSelection.bind(Object(l.a)(c)),c}return Object(r.a)(s,[{key:"taskHasChanged",value:function(e){this.setState({selectedTask:e})}},{key:"cancelSelection",value:function(){this.setState({selectedTask:-1})}},{key:"render",value:function(){return Object(m.jsxs)(a.a.Fragment,{children:[Object(m.jsx)("h1",{className:"ui header",children:"ST Desk"}),Object(m.jsxs)("div",{className:"ui two column grid",onClick:this.cancelSelection,children:[Object(m.jsx)("div",{className:"column",children:Object(m.jsx)(p,{taskHasChanged:this.taskHasChanged,selectedTask:this.state.selectedTask})}),Object(m.jsx)("div",{className:"column",children:Object(m.jsx)(x,{id:this.state.selectedTask})})]})]})}}]),s}(a.a.Component)),k=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,25)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),c(e),a(e),n(e),i(e)}))};i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root")),k()}],[[24,1,2]]]);
//# sourceMappingURL=main.31ec6d2b.chunk.js.map